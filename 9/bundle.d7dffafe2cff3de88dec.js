(()=>{"use strict";var e={10:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(537),i=n.n(r),o=n(645),s=n.n(o)()(i());s.push([e.id,".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n","",{version:3,sources:["webpack://./src/framework/view/abstract-view.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE;;IAEE,wBAAwB;EAC1B;;EAEA;;;;;IAKE,2BAA2B;EAC7B;;EAEA;;;;IAIE,0BAA0B;EAC5B;AACF",sourcesContent:[".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n"],sourceRoot:""}]);const a=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var p=[].concat(e[c]);r&&s[p[0]]||(void 0!==o&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=o),n&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=n):p[2]=n),i&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=i):p[4]="".concat(i)),t.push(p))}},t}},537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},s=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],p=o[c]||0,d="".concat(c," ").concat(p);o[c]=p+1;var u=n(d),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var f=i(m,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=n(o[s]);t[a].references--}for(var l=r(e,i),c=0;c<o.length;c++){var p=n(o[c]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}o=l}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{function e(e,t,n="beforeend"){if(!(e instanceof C))throw new Error("Can render only components");if(null===t)throw new Error("Container element doesn't exist");t.insertAdjacentElement(n,e.element)}function t(e,t){if(!(e instanceof C&&t instanceof C))throw new Error("Can replace only components");const n=e.element,r=t.element,i=r.parentElement;if(null===i)throw new Error("Parent element doesn't exist");i.replaceChild(n,r)}var r=n(379),i=n.n(r),o=n(795),s=n.n(o),a=n(569),l=n.n(a),c=n(565),p=n.n(c),d=n(216),u=n.n(d),m=n(589),f=n.n(m),h=n(10),v={};v.styleTagTransform=f(),v.setAttributes=p(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),i()(h.Z,v),h.Z&&h.Z.locals&&h.Z.locals;const _="shake";class C{#e=null;constructor(){if(new.target===C)throw new Error("Can't instantiate AbstractView, only concrete one.")}get element(){return this.#e||(this.#e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(this.template)),this.#e}get template(){throw new Error("Abstract method not implemented: get template")}removeElement(){this.#e=null}shake(e){this.element.classList.add(_),setTimeout((()=>{this.element.classList.remove(_),e?.()}),600)}}const y={1:"JAN",2:"FEB",3:"MAR",4:"APR",5:"MAY",6:"JUN",7:"JUL",8:"AUG",9:"SEP",10:"OCT",11:"NOV",12:"DEC"},g=["Everything","Future","Present","Past"],b=(e,t)=>{const n=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),r=Math.floor(Math.max(Math.abs(e),Math.abs(t))),i=Math.random()*(r-n+1)+n;return Math.floor(i)},w=e=>e[Math.floor(Math.random()*e.length)];class $ extends C{get template(){return'\n    <ul class="trip-events__list">\n    </ul>\n  '}}const S=[{id:"1",name:"Taxi"},{id:"2",name:"Bus"},{id:"3",name:"Train"},{id:"4",name:"Ship"},{id:"5",name:"Drive"},{id:"6",name:"Flight"},{id:"7",name:"Check-in"},{id:"8",name:"Sightseeing"},{id:"9",name:"Restaurant"}],E=[{id:"1",description:"Chamonix, is a beautiful city, a true asian pearl, with crowded streets.",name:"Chamonix",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Chamonix parliament building"}]},{id:"2",description:"",name:"Amsterdam",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Chamonix parliament building"}]},{id:"3",description:"",name:"Geneva",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Chamonix parliament building"}]},{id:"4",description:"",name:"Paris",pictures:[]}],A=e=>E[E.findIndex((t=>t.id===e))],k=[{type:"taxi",offers:[{id:"1",title:"Upgrade to a business class",price:120},{id:"2",title:"Order Uber",price:20}]},{type:"sightseeing",offers:[{id:"3",title:"Book tickets",price:40},{id:"4",title:"Lunch in city",price:30}]},{type:"flight",offers:[{id:"5",title:"Add luggage",price:50},{id:"6",title:"Switch to comfort",price:80},{id:"7",title:"Add meal",price:15},{id:"8",title:"Choose seats",price:5},{id:"9",title:"Travel by train",price:40}]}],L=e=>{for(let t=0;t<k.length;t++)for(let n=0;n<k[t].offers.length;n++)if(k[t].offers[n].id===e)return k[t].offers[n];return null},T=e=>{const t=Math.floor(e/60);return e%=60,`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}:00.0Z`},x=()=>{const e=w(S).id,t=(n=e,S[S.findIndex((e=>e.id===n))]);var n;const r=(e=>{for(let t=0;t<k.length;t++)if(k[t].type.toLowerCase()===e.name.toLowerCase()){const e=Object.keys(k[t].offers).length,n=b(0,e),r=Array.from({length:n},(()=>w(k[t].offers).id)),i=new Set(r);return Array.from(i,(e=>e))}return null})(t),i=b(1,15),o=b(0,1440),s=T(o),a=i+b(0,7),l=b(o,1440),c=T(l);return{id:b(1,1e5),base_price:b(1,1e3),date_from:`2024-08-${String(i).padStart(2,"0")}T${s}`,date_to:`2024-08-${String(a).padStart(2,"0")}T${c}`,destination:w(E).id,is_favorite:!1,offers:r,type:t.name.toLowerCase()}};class M{#t=Array.from({length:6},x);get route(){return this.#t}}class D extends C{get template(){return'\n    <p class="trip-events__msg">Click New Event to create your first point</p>\n  '}}class H extends C{#n="";#r="";#i="";constructor(e,t,n){super(),this.#n=e,this.#r=t,this.#i=n}get template(){return`\n    <section class="trip-main__trip-info  trip-info">\n      <div class="trip-info__main">\n        <h1 class="trip-info__title">${this.#n}</h1>\n\n        <p class="trip-info__dates">${this.#r}</p>\n      </div>\n\n      <p class="trip-info__cost">\n        Total: &euro;&nbsp;<span class="trip-info__cost-value">${this.#i}</span>\n      </p>\n    </section>\n  `}}class R extends C{constructor(e){super(),this.routePoint=e}get template(){return function(e){const{type:t,destination:n,date_from:r,date_to:i,base_price:o,is_favorite:s,offers:a}=e,l=r.split("T")[0],c=(e=>{const t=+e.split("-")[1],n=e.split("-")[2];return`${y[t]} ${n}`})(l),p=r.split("T")[1].slice(0,5),d=i.split("T")[1].slice(0,5),u=new Date(r),m=new Date(i),f=(e=>{e=e/1e3/60;const t=Math.floor(e/1440),n=Math.floor((e-1440*t)/60),r=e%60;let i="";return t&&(i+=`${String(t).padStart(2,"0")}D `),i+=`${String(n).padStart(2,"0")}H `,i+=`${String(r).padStart(2,"0")}M`,i})(new Date(m-u)),h=(v=t,S[S.findIndex((e=>e.name.toLowerCase()===v.toLowerCase()))]);var v;const _=A(n);let C="";if(a&&a.length)for(let e=0;e<a.length;e++){const t=L(a[e]);C+=`\n        <li class="event__offer">\n        <span class="event__offer-title">${t.title}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${t.price}</span>\n      </li>\n    `}return`\n    <li class="trip-events__item">\n      <div class="event">\n        <time class="event__date" datetime="${l}">${c}</time>\n        <div class="event__type">\n          <img class="event__type-icon" width="42" height="42" src="img/icons/${h.name.toLowerCase()}.png" alt="Event type icon">\n        </div>\n        <h3 class="event__title">${h.name} ${_.name}</h3>\n        <div class="event__schedule">\n          <p class="event__time">\n            <time class="event__start-time" datetime="${r}">${p}</time>\n            &mdash;\n            <time class="event__end-time" datetime="${i}">${d}</time>\n          </p>\n          <p class="event__duration">${f}</p>\n        </div>\n        <p class="event__price">\n          &euro;&nbsp;<span class="event__price-value">${o}</span>\n        </p>\n        <h4 class="visually-hidden">Offers:</h4>\n        <ul class="event__selected-offers">\n          ${C}\n        </ul>\n        <button class="event__favorite-btn ${s?"event__favorite-btn--active":""}" type="button">\n          <span class="visually-hidden">Add to favorite</span>\n          <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n            <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n          </svg>\n        </button>\n        <button class="event__rollup-btn" type="button">\n          <span class="visually-hidden">Open event</span>\n        </button>\n      </div>\n    </li>\n  `}(this.routePoint)}replaceRowToForm(e,n){t(e,n)}}const P=e=>`${String(e.getUTCDate()).padStart(2,"0")}/${String(e.getUTCMonth()+1).padStart(2,"0")}/${String(e.getUTCFullYear()).slice(2,4)} ${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}`;class I extends C{#o=null;constructor(e){super(),this.#o=e}get template(){return function(e){const t=e.type,n=A(e.destination).name,r=P(new Date(e.date_from)),i=P(new Date(e.date_to));return`\n    <li class="trip-events__item">\n      <form class="event event--edit" action="#" method="post">\n        <header class="event__header">\n          <div class="event__type-wrapper">\n            <label class="event__type  event__type-btn" for="event-type-toggle-${e.id}">\n              <span class="visually-hidden">Choose event type</span>\n              <img class="event__type-icon" width="17" height="17" src="img/icons/${t.toLowerCase()}.png" alt="Event type icon">\n            </label>\n            <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${e.id}" type="checkbox">\n\n            <div class="event__type-list">\n              <fieldset class="event__type-group">\n                <legend class="visually-hidden">Event type</legend>\n                ${function(e){let t="";for(let n=0;n<S.length;n++){const r=S[n].name.toLowerCase()===e.toLowerCase()?"checked":"";t+=`\n      <div class="event__type-item">\n        <input id="event-type-${S[n].name.toLowerCase()}-1" class="event__type-input  visually-hidden"\n        type="radio" name="event-type" value="${S[n].name.toLowerCase()}" ${r}>\n        <label class="event__type-label  event__type-label--${S[n].name.toLowerCase()}"\n        for="event-type-${S[n].name.toLowerCase()}-1">${S[n].name}</label>\n      </div>`}return t}(t)}\n              </fieldset>\n            </div>\n          </div>\n\n          <div class="event__field-group  event__field-group--destination">\n            <label class="event__label  event__type-output" for="event-destination-${e.id}">\n              ${t}\n            </label>\n            <input class="event__input  event__input--destination" id="event-destination-${e.id}" type="text" name="event-destination"\n            value="${n}" list="destination-list-${e.id}">\n            <datalist id="destination-list-${e.id}">\n              ${function(){let e="";for(let t=0;t<E.length;t++)e+=`<option value="${E[t].name}"></option>`;return e}()}\n            </datalist>\n          </div>\n\n          <div class="event__field-group  event__field-group--time">\n            <label class="visually-hidden" for="event-start-time-${e.id}">From</label>\n            <input class="event__input  event__input--time" id="event-start-time-${e.id}" type="text" name="event-start-time" value="${r}">\n            &mdash;\n            <label class="visually-hidden" for="event-end-time-${e.id}">To</label>\n            <input class="event__input  event__input--time" id="event-end-time-${e.id}" type="text" name="event-end-time" value="${i}">\n          </div>\n\n          <div class="event__field-group  event__field-group--price">\n            <label class="event__label" for="event-price-${e.id}">\n              <span class="visually-hidden">Price</span>\n              &euro;\n            </label>\n            <input class="event__input  event__input--price" id="event-price-${e.id}" type="text" name="event-price" value="${e.base_price}">\n          </div>\n\n          <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n          <button class="event__reset-btn" type="reset">Delete</button>\n          <button class="event__rollup-btn" type="button">\n            <span class="visually-hidden">Open event</span>\n          </button>\n        </header>\n        <section class="event__details">\n          ${function(e,t){let n="";for(let r=0;r<k.length;r++)if(k[r].type.toLowerCase()===e.toLowerCase()&&k[r].offers.length>0){n+='\n          <section class="event__section  event__section--offers">\n          <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n\n          <div class="event__available-offers">\n        ';for(let e=0;e<k[r].offers.length;e++)n+=`\n            <div class="event__offer-selector">\n              <input class="event__offer-checkbox  visually-hidden" id="event-offer-${k[r].offers[e].id}"\n              type="checkbox" name="event-offer-${k[r].offers[e].id}" ${t.includes(k[r].offers[e].id)?"checked":""}>\n              <label class="event__offer-label" for="event-offer-${k[r].offers[e].id}">\n                <span class="event__offer-title">${k[r].offers[e].title}</span>\n                &plus;&euro;&nbsp;\n                <span class="event__offer-price">${k[r].offers[e].price}</span>\n              </label>\n            </div>\n          `;n+="\n            </div>\n          </section>\n        "}return n}(t,e.offers)}\n          <section class="event__section  event__section--destination">\n            <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n            <p class="event__destination-description">${(o=n,E[E.findIndex((e=>e.name.toLowerCase()===o.toLowerCase()))]).description}</p>\n          </section>\n        </section>\n      </form>\n    </li>\n  `;var o}(this.#o)}replaceFormToRow(e,n){t(e,n)}}class q{#s=null;#a=null;#l=null;#c=null;updatePointCb=null;renderSortCb=null;constructor(e,t,n,r){this.#s=e,this.#c=t,this.updatePointCb=n,this.renderSortCb=r,this.#a=new R(this.#c),this.#l=new I(this.#c)}#p(){this.#a.element.querySelector(".event__rollup-btn").addEventListener("click",this.#d),this.#a.element.querySelector(".event__favorite-btn").addEventListener("click",this.#u)}init(){e(this.#a,this.#s.element),this.#p()}#u=()=>{const e=this.#a;this.updatePointCb(this.#c),this.#a=new R(this.#c),t(this.#a,e),this.#p()};#m=()=>{};#f(e){e.preventDefault(),this.#l.replaceFormToRow(this.#a,this.#l),document.removeEventListener("keydown",this.#h),this.#l.element.querySelector(".event--edit").removeEventListener("submit",this.#f)}#h=e=>{"Escape"===e.key&&(e.preventDefault(),this.#l.replaceFormToRow(this.#a,this.#l),document.removeEventListener("keydown",this.#h),this.#l.element.querySelector(".event--edit").removeEventListener("submit",this.#f),this.#a.element.querySelector(".event__favorite-btn").addEventListener("click",this.#u))};#v=()=>{this.#l.replaceFormToRow(this.#a,this.#l),this.#l.element.querySelector(".event__rollup-btn").removeEventListener("click",this.#v),this.#l.element.querySelector(".event__type-group").removeEventListener("change",this.#m),this.#a.element.querySelector(".event__favorite-btn").addEventListener("click",this.#u),document.removeEventListener("keydown",this.#h),this.#l.element.querySelector(".event--edit").addEventListener("submit",this.#f)};#d=()=>{this.#a.replaceRowToForm(this.#l,this.#a),this.#a.element.querySelector(".event__favorite-btn").removeEventListener("click",this.#u),this.#l.element.querySelector(".event__rollup-btn").addEventListener("click",this.#v),this.#l.element.querySelector(".event--edit").addEventListener("submit",this.#f),this.#l.element.querySelector(".event__type-group").addEventListener("change",this.#m),document.addEventListener("keydown",this.#h)}}const B=(e,t)=>{const n=new Date(e);return new Date(t)-n},U=e=>new Date(e),N=(e,t)=>U(e.date_from)-U(t.date_from),O=new Map([["Day",{sortName:"Day",isDisabled:!1,isChecked:!0,sortMethod:N}],["Event",{sortName:"Event",isDisabled:!0,isChecked:!1,sortMethod:null}],["Time",{sortName:"Time",isDisabled:!1,isChecked:!1,sortMethod:(e,t)=>B(t.date_from,t.date_to)-B(e.date_from,e.date_to)}],["Price",{sortName:"Price",isDisabled:!1,isChecked:!1,sortMethod:(e,t)=>t.base_price-e.base_price}],["Offers",{sortName:"Offers",isDisabled:!0,isChecked:!1,sortMethod:null}]]);class F extends C{constructor(){super()}get template(){return`\n    <form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n      ${Array.from(O.entries(),(e=>function({sortName:e,isDisabled:t,isChecked:n}){return`\n      <div class="trip-sort__item  trip-sort__item--${e.toLowerCase()}">\n        <input id="sort-${e.toLowerCase()}"\n          class="trip-sort__input  visually-hidden"\n          type="radio"\n          name="trip-sort"\n          value="sort-${e.toLowerCase()}"\n          ${t?"disabled":""}\n          ${n?"checked":""}\n          data-sort-type="${e}">\n        <label class="trip-sort__btn" for="sort-${e.toLowerCase()}">${e}</label>\n      </div>\n  `}(e[1]))).join("")}\n    </form>\n  `}}class j{#_=null;#t=null;#C=null;constructor(e,t){this.#t=e,this.#C=t,this.#_=new F(this.#t)}init(){e(this.#_,this.#C,"afterbegin")}getDefaultSortMethod(){return O.get("Day").sortMethod}}const K=document.querySelector(".trip-controls__filters"),X=document.querySelector(".trip-events"),Z=new class{routeContainer=null;#s=new $;#t=new M;#y=null;#g=null;#b=new Map;constructor({routeContainer:e}){this.routeContainer=e}#w(){if(this.#t.length>0){const t=(e=>{const t=new Array;return e.forEach((e=>t.push(A(e.destination).name))),t.length>3?`${[t[0]]} - ... - ${[t[t.length-1]]}`:t.join(" - ")})(this.#t),n=(e=>{const t=e.slice().sort(N),n=new Date(t[0].date_from),r=new Date(t.slice(-1)[0].date_to);return i=n.getUTCDate(),o=n.getUTCMonth()+1,s=r.getUTCDate(),o===(a=r.getUTCMonth()+1)?`${String(i).padStart(2,"0")} - ${String(s).padStart(2,"0")}\n            ${y[o]}`:`${String(i).padStart(2,"0")} ${y[o]} -\n          ${String(s).padStart(2,"0")} ${y[a]}`;var i,o,s,a})(this.#t),r=(e=>{let t=0;for(let n=0;n<e.length;n++)if(t+=e[n].base_price,e[n].offers&&e[n].offers.length)for(let r=0;r<e[n].offers.length;r++)t+=L(e[n].offers[r]).price;return t})(this.#t),i=document.querySelector(".trip-main");this.#g=new H(t,n,r),e(this.#g,i,"afterbegin")}}#$=e=>{"INPUT"===e.target.tagName&&(this.#t.sort(O.get(e.target.dataset.sortType).sortMethod),this.#S())};#E=()=>{const e=new j(this.#t,this.routeContainer);e.init(),this.#t=this.#t.sort(e.getDefaultSortMethod()),document.querySelector(".trip-events__trip-sort").addEventListener("click",this.#$)};#A=e=>{let t=null;for(let n=0;n<this.#t.length;n++)if(this.#t[n]===e){t=this.#t[n];break}t.is_favorite=!t.is_favorite};#S(){!function(e){if(null!==e){if(!(e instanceof C))throw new Error("Can remove only components");e.element.remove(),e.removeElement()}}(this.#s),this.#s=new $,e(this.#s,this.routeContainer),this.#t.forEach((e=>this.#k(e)))}#k(e){const t=new q(this.#s,e,this.#A,this.#E);t.init(e),this.#b.set(e.id,t)}#L(){this.#y=new D,e(this.#y,this.routeContainer)}init(){e(this.#s,this.routeContainer),this.#t=[...this.#t.route],this.#t.length?(this.#E(),this.#S(),this.#w()):this.#L()}}({routeContainer:X});e(new class extends C{get template(){return`\n    <form class="trip-filters" action="#" method="get">\n      ${Array.from(g,(e=>{return`\n      <div class="trip-filters__filter">\n        <input id="filter-${(t=e).toLowerCase()}" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="${t.toLowerCase()}">\n        <label class="trip-filters__filter-label" for="filter-${t.toLowerCase()}">${t}</label>\n      </div>\n  `;var t})).join("")}\n      <button class="visually-hidden" type="submit">Accept filter</button>\n    </form>\n  `}},K),Z.init()})()})();
//# sourceMappingURL=bundle.d7dffafe2cff3de88dec.js.map