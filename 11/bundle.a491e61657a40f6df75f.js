(()=>{"use strict";var e={10:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(537),r=n.n(i),s=n(645),o=n.n(s)()(r());o.push([e.id,".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n","",{version:3,sources:["webpack://./src/framework/view/abstract-view.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE;;IAEE,wBAAwB;EAC1B;;EAEA;;;;;IAKE,2BAA2B;EAC7B;;EAEA;;;;IAIE,0BAA0B;EAC5B;AACF",sourcesContent:[".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n"],sourceRoot:""}]);const a=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var p=[].concat(e[c]);i&&o[p[0]]||(void 0!==s&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=s),n&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=n):p[2]=n),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),t.push(p))}},t}},537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),s="/*# ".concat(r," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=i.base?l[0]+i.base:l[0],p=s[c]||0,d="".concat(c," ").concat(p);s[c]=p+1;var u=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(f);else{var m=r(f,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=i(e,r),c=0;c<s.length;c++){var p=n(s[c]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}s=l}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{function e(e,t,n="beforeend"){if(!(e instanceof g))throw new Error("Can render only components");if(null===t)throw new Error("Container element doesn't exist");t.insertAdjacentElement(n,e.element)}function t(e,t){if(!(e instanceof g&&t instanceof g))throw new Error("Can replace only components");const n=e.element,i=t.element,r=i.parentElement;if(null===r)throw new Error("Parent element doesn't exist");r.replaceChild(n,i)}var i=n(379),r=n.n(i),s=n(795),o=n.n(s),a=n(569),l=n.n(a),c=n(565),p=n.n(c),d=n(216),u=n.n(d),f=n(589),m=n.n(f),h=n(10),v={};v.styleTagTransform=m(),v.setAttributes=p(),v.insert=l().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=u(),r()(h.Z,v),h.Z&&h.Z.locals&&h.Z.locals;const _="shake";class g{#e=null;constructor(){if(new.target===g)throw new Error("Can't instantiate AbstractView, only concrete one.")}get element(){return this.#e||(this.#e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(this.template)),this.#e}get template(){throw new Error("Abstract method not implemented: get template")}removeElement(){this.#e=null}shake(e){this.element.classList.add(_),setTimeout((()=>{this.element.classList.remove(_),e?.()}),600)}}const y={1:"JAN",2:"FEB",3:"MAR",4:"APR",5:"MAY",6:"JUN",7:"JUL",8:"AUG",9:"SEP",10:"OCT",11:"NOV",12:"DEC"},C=["Everything","Future","Present","Past"],b=(e,t)=>{const n=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),i=Math.floor(Math.max(Math.abs(e),Math.abs(t))),r=Math.random()*(i-n+1)+n;return Math.floor(r)},w=e=>e[Math.floor(Math.random()*e.length)];class $ extends g{get template(){return'\n    <ul class="trip-events__list">\n    </ul>\n  '}}const S=[{id:"1",name:"Taxi"},{id:"2",name:"Bus"},{id:"3",name:"Train"},{id:"4",name:"Ship"},{id:"5",name:"Drive"},{id:"6",name:"Flight"},{id:"7",name:"Check-in"},{id:"8",name:"Sightseeing"},{id:"9",name:"Restaurant"}],E=[{id:"1",description:"Chamonix, is a beautiful city, a true asian pearl, with crowded streets.",name:"Chamonix",pictures:[{src:"https://i.pinimg.com/736x/e8/8f/30/e88f3028afe762960b7a2c11837b34d1.jpg",description:"Chamonix parliament building"},{src:"https://i.pinimg.com/736x/9f/b3/d3/9fb3d303905046143b259f42e33c7844.jpg",description:"Chamonix parliament building"}]},{id:"2",description:"Amsterdam, is a beautiful city, a true asian pearl, with crowded streets.",name:"Amsterdam",pictures:[{src:"https://i.pinimg.com/736x/ae/2e/70/ae2e70f6660753cf4353ff443d3b1726.jpg",description:"Amsterdam parliament building"},{src:"https://i.pinimg.com/736x/50/cc/c0/50ccc0381cb2bfefea04deff34a45fd6.jpg",description:"Amsterdam parliament building"}]},{id:"3",description:"Geneva, is a beautiful city, a true asian pearl, with crowded streets.",name:"Geneva",pictures:[{src:"https://i.pinimg.com/736x/6f/7e/93/6f7e931d4eaa4d12f228b1c239cb3f4d.jpg",description:"Geneva parliament building"},{src:"https://i.pinimg.com/736x/f1/cd/c8/f1cdc81502b76727db094ca604c0486c.jpg",description:"Geneva parliament building"}]},{id:"4",description:"Paris, is a beautiful city, a true asian pearl, with crowded streets.",name:"Paris",pictures:[]}],A=e=>E[E.findIndex((t=>t.id===e))],x=[{type:"taxi",offers:[{id:"1",title:"Upgrade to a business class",price:120},{id:"2",title:"Order Uber",price:20}]},{type:"sightseeing",offers:[{id:"3",title:"Book tickets",price:40},{id:"4",title:"Lunch in city",price:30}]},{type:"flight",offers:[{id:"5",title:"Add luggage",price:50},{id:"6",title:"Switch to comfort",price:80},{id:"7",title:"Add meal",price:15},{id:"8",title:"Choose seats",price:5},{id:"9",title:"Travel by train",price:40}]}],T=e=>{for(let t=0;t<x.length;t++)for(let n=0;n<x[t].offers.length;n++)if(x[t].offers[n].id===e)return x[t].offers[n];return null},k=e=>{const t=Math.floor(e/60);return e%=60,`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}:00.0Z`},L=()=>{const e=w(S).id,t=(n=e,S[S.findIndex((e=>e.id===n))]);var n;const i=(e=>{for(let t=0;t<x.length;t++)if(x[t].type.toLowerCase()===e.name.toLowerCase()){const e=Object.keys(x[t].offers).length,n=b(0,e),i=Array.from({length:n},(()=>w(x[t].offers).id)),r=new Set(i);return Array.from(r,(e=>e))}return null})(t),r=b(1,15),s=b(0,1440),o=k(s),a=r+b(0,7),l=b(s,1440),c=k(l);return{id:b(1,1e5),base_price:b(1,1e3),date_from:`2024-08-${String(r).padStart(2,"0")}T${o}`,date_to:`2024-08-${String(a).padStart(2,"0")}T${c}`,destination:w(E).id,is_favorite:!1,offers:i,type:t.name.toLowerCase()}};class M{#t=Array.from({length:8},L);get route(){return this.#t}}class H extends g{get template(){return'\n    <p class="trip-events__msg">Click New Event to create your first point</p>\n  '}}class P extends g{constructor(e){super(),this.routePoint=e}get template(){return function(e){const{type:t,destination:n,date_from:i,date_to:r,base_price:s,is_favorite:o,offers:a}=e,l=i.split("T")[0],c=(e=>{const t=+e.split("-")[1],n=e.split("-")[2];return`${y[t]} ${n}`})(l),p=i.split("T")[1].slice(0,5),d=r.split("T")[1].slice(0,5),u=new Date(i),f=new Date(r),m=(e=>{e=e/1e3/60;const t=Math.floor(e/1440),n=Math.floor((e-1440*t)/60),i=e%60;let r="";return t&&(r+=`${String(t).padStart(2,"0")}D `),r+=`${String(n).padStart(2,"0")}H `,r+=`${String(i).padStart(2,"0")}M`,r})(new Date(f-u)),h=(v=t,S[S.findIndex((e=>e.name.toLowerCase()===v.toLowerCase()))]);var v;const _=A(n);let g="";if(a&&a.length)for(let e=0;e<a.length;e++){const t=T(a[e]);g+=`\n        <li class="event__offer">\n        <span class="event__offer-title">${t.title}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${t.price}</span>\n      </li>\n    `}return`\n    <li class="trip-events__item">\n      <div class="event">\n        <time class="event__date" datetime="${l}">${c}</time>\n        <div class="event__type">\n          <img class="event__type-icon" width="42" height="42" src="img/icons/${h.name.toLowerCase()}.png" alt="Event type icon">\n        </div>\n        <h3 class="event__title">${h.name} ${_.name}</h3>\n        <div class="event__schedule">\n          <p class="event__time">\n            <time class="event__start-time" datetime="${i}">${p}</time>\n            &mdash;\n            <time class="event__end-time" datetime="${r}">${d}</time>\n          </p>\n          <p class="event__duration">${m}</p>\n        </div>\n        <p class="event__price">\n          &euro;&nbsp;<span class="event__price-value">${s}</span>\n        </p>\n        <h4 class="visually-hidden">Offers:</h4>\n        <ul class="event__selected-offers">\n          ${g}\n        </ul>\n        <button class="event__favorite-btn ${o?"event__favorite-btn--active":""}" type="button">\n          <span class="visually-hidden">Add to favorite</span>\n          <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n            <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n          </svg>\n        </button>\n        <button class="event__rollup-btn" type="button">\n          <span class="visually-hidden">Open event</span>\n        </button>\n      </div>\n    </li>\n  `}(this.routePoint)}replaceRowToForm(e,n){t(e,n)}}class R extends g{_state={};updateElement(e){e&&(this._setState(e),this.#n())}_restoreHandlers(){throw new Error("Abstract method not implemented: restoreHandlers")}_setState(e){this._state=structuredClone({...this._state,...e})}#n(){const e=this.element,t=e.parentElement;this.removeElement();const n=this.element;t.replaceChild(n,e),this._restoreHandlers()}}const D=(e,t)=>{const n=new Date(e);return new Date(t)-n},I=e=>new Date(e),U=(e,t)=>I(e.date_from)-I(t.date_from),q=["day","event","time","price","offers"],B={day:U,time:(e,t)=>D(t.date_from,t.date_to)-D(e.date_from,e.date_to),price:(e,t)=>t.base_price-e.base_price},j=q[0],F=B[j],O=e=>e.charAt(0).toUpperCase()+e.slice(1);function N(e){return`\n    <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n    <p class="event__destination-description">${e.description}</p>\n\n    <div class="event__photos-container">\n      <div class="event__photos-tape">\n        ${function(e){let t="";return e.pictures.length&&e.pictures.forEach((e=>{t+=`<img class="event__photo" src=${e.src} alt="Event photo">`})),t}(e)}\n      </div>\n    </div>\n  `}function X(e,t){let n="";for(let i=0;i<x.length;i++)if(x[i].type.toLowerCase()===e.toLowerCase()&&x[i].offers.length>0){n+='\n          <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n\n          <div class="event__available-offers">\n        ';for(let e=0;e<x[i].offers.length;e++)n+=`\n            <div class="event__offer-selector">\n              <input class="event__offer-checkbox  visually-hidden" id="event-offer-${x[i].offers[e].id}"\n              type="checkbox" name="event-offer-${x[i].offers[e].id}" ${t.includes(x[i].offers[e].id)?"checked":""}>\n              <label class="event__offer-label" for="event-offer-${x[i].offers[e].id}">\n                <span class="event__offer-title">${x[i].offers[e].title}</span>\n                &plus;&euro;&nbsp;\n                <span class="event__offer-price">${x[i].offers[e].price}</span>\n              </label>\n            </div>\n          `;n+="\n          </div>\n        "}return n}const Z=e=>`${String(e.getUTCDate()).padStart(2,"0")}/${String(e.getUTCMonth()+1).padStart(2,"0")}/${String(e.getUTCFullYear()).slice(2,4)} ${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}`;class G extends R{#i=null;#r=null;#s=null;constructor(e,t,n){super(),this.#i=e,this.#r=t,this.#s=n,this._setState(G.parsePointToState(this.#i)),this._restoreHandlers()}get template(){return function(e){const t=e.type,n=Z(new Date(e.date_from)),i=Z(new Date(e.date_to)),r=A(e.destination);return`\n    <li class="trip-events__item">\n      <form class="event event--edit" action="#" method="post">\n        <header class="event__header">\n          <div class="event__type-wrapper">\n            <label class="event__type  event__type-btn" for="event-type-toggle-${e.id}">\n              <span class="visually-hidden">Choose event type</span>\n              <img class="event__type-icon" width="17" height="17" src="img/icons/${t.toLowerCase()}.png" alt="Event type icon">\n            </label>\n            <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${e.id}" type="checkbox">\n\n            <div class="event__type-list">\n              <fieldset class="event__type-group">\n                <legend class="visually-hidden">Event type</legend>\n                ${function(e){let t="";for(let n=0;n<S.length;n++){const i=S[n].name.toLowerCase()===e.toLowerCase()?"checked":"";t+=`\n      <div class="event__type-item">\n        <input id="event-type-${S[n].name.toLowerCase()}-1" class="event__type-input  visually-hidden"\n        type="radio" name="event-type" value="${S[n].name.toLowerCase()}" ${i}>\n        <label class="event__type-label  event__type-label--${S[n].name.toLowerCase()}"\n        for="event-type-${S[n].name.toLowerCase()}-1">${S[n].name}</label>\n      </div>`}return t}(t)}\n              </fieldset>\n            </div>\n          </div>\n\n          <div class="event__field-group  event__field-group--destination">\n            <label class="event__label  event__type-output" for="event-destination-${e.id}">\n              ${t}\n            </label>\n            <input class="event__input  event__input--destination" id="event-destination-${e.id}" type="text" name="event-destination"\n            value="${r.name}" list="destination-list-${e.id}">\n            <datalist id="destination-list-${e.id}">\n              ${function(){let e="";for(let t=0;t<E.length;t++)e+=`<option value="${E[t].name}"></option>`;return e}()}\n            </datalist>\n          </div>\n\n          <div class="event__field-group  event__field-group--time">\n            <label class="visually-hidden" for="event-start-time-${e.id}">From</label>\n            <input class="event__input  event__input--time" id="event-start-time-${e.id}" type="text" name="event-start-time" value="${n}">\n            &mdash;\n            <label class="visually-hidden" for="event-end-time-${e.id}">To</label>\n            <input class="event__input  event__input--time" id="event-end-time-${e.id}" type="text" name="event-end-time" value="${i}">\n          </div>\n\n          <div class="event__field-group  event__field-group--price">\n            <label class="event__label" for="event-price-${e.id}">\n              <span class="visually-hidden">Price</span>\n              &euro;\n            </label>\n            <input class="event__input  event__input--price" id="event-price-${e.id}" type="text" name="event-price" value="${e.base_price}">\n          </div>\n\n          <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n          <button class="event__reset-btn" type="reset">Delete</button>\n          <button class="event__rollup-btn" type="button">\n            <span class="visually-hidden">Open event</span>\n          </button>\n        </header>\n        <section class="event__details">\n          <section class="event__section  event__section--offers">\n            ${X(t,e.offers)}\n          </section>\n\n          <section class="event__section  event__section--destination">\n            ${N(r)}\n          </section>\n        </section>\n      </form>\n    </li>\n  `}(this._state)}replaceFormToRow(e,n){t(e,n)}_restoreHandlers(){this.element.querySelector(".event__rollup-btn").addEventListener("click",this.#o),this.element.querySelector(".event--edit").addEventListener("submit",this.#a),this.element.querySelector(".event__type-group").addEventListener("change",this.#l),this.element.querySelector(".event__input--destination").addEventListener("change",this.#c)}#o=()=>{this.updateElement(G.parsePointToState(this.#i)),this.#s()};#a(e){e.preventDefault(),this.replaceFormToRow(this.#r,this)}#l=()=>{const e=this.element.querySelector('input[name="event-type"]:checked').value;this.element.querySelector(".event__section--offers").innerHTML=X(e,""),this.element.querySelector(".event__type-icon").src=`img/icons/${e.toLowerCase()}.png`,this.element.querySelector(".event__label").textContent=O(e)};#c=()=>{const e=this.element.querySelector(".event__input--destination").value;var t;this.element.querySelector(".event__section--destination").innerHTML=N((t=e,E[E.findIndex((e=>e.name.toLowerCase()===t.toLowerCase()))]))};static parsePointToState(e){return{...e}}static parseStateToPoint(e){return{...e}}}const J="VIEW",z="EDIT";class K{#p=null;#r=null;#d=null;#u=null;#f=null;updatePointCb=null;resetMethodCb=null;constructor(e,t,n,i){this.#p=e,this.#u=t,this.updatePointCb=n,this.resetMethodCb=i,this.#f=J,this.#r=new P(this.#u),this.#d=new G(this.#u,this.#r,this.#o)}#m(){this.#r.element.querySelector(".event__rollup-btn").addEventListener("click",this.#h),this.#r.element.querySelector(".event__favorite-btn").addEventListener("click",this.#v)}init(){e(this.#r,this.#p.element),this.#m()}#v=()=>{const e=this.#r;this.updatePointCb(this.#u),this.#r=new P(this.#u),t(this.#r,e),this.#m()};#h=()=>{this.resetMethodCb(),this.#r.replaceRowToForm(this.#d,this.#r),this.#f=z};#o=()=>{this.resetComponent()};resetComponent=()=>{this.#f===z&&(this.#d.replaceFormToRow(this.#r,this.#d),this.#f=J)}}class V extends g{constructor(){super()}get template(){return`\n    <form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n      ${Array.from(q,(e=>{return`\n      <div class="trip-sort__item  trip-sort__item--${t=e}">\n        <input id="sort-${t}"\n          class="trip-sort__input  visually-hidden"\n          type="radio"\n          name="trip-sort"\n          value="sort-${t}"\n          ${t in B?"":"disabled"}\n          ${t===j?"checked":""}\n          data-sort-type="${t}">\n        <label class="trip-sort__btn" for="sort-${t.toLowerCase()}">${O(t)}</label>\n      </div>\n  `;var t})).join("")}\n    </form>\n  `}}class W{#_=null;#t=null;#g=null;constructor(e,t){this.#t=e,this.#g=t,this.#_=new V(this.#t)}init(){e(this.#_,this.#g,"afterbegin")}}class Y extends g{#y="";#C="";#b="";constructor(e,t,n){super(),this.#y=e,this.#C=t,this.#b=n}get template(){return`\n    <section class="trip-main__trip-info  trip-info">\n      <div class="trip-info__main">\n        <h1 class="trip-info__title">${this.#y}</h1>\n\n        <p class="trip-info__dates">${this.#C}</p>\n      </div>\n\n      <p class="trip-info__cost">\n        Total: &euro;&nbsp;<span class="trip-info__cost-value">${this.#b}</span>\n      </p>\n    </section>\n  `}}class Q{#w=null;#t=null;constructor(e){this.#t=e}init(){const t=document.querySelector(".trip-main"),n=(e=>{const t=new Array;return e.forEach((e=>t.push(A(e.destination).name))),t.length>3?`${[t[0]]} - ... - ${[t[t.length-1]]}`:t.join(" - ")})(this.#t),i=(e=>{const t=e.slice().sort(U),n=new Date(t[0].date_from),i=new Date(t.slice(-1)[0].date_to);return r=n.getUTCDate(),s=n.getUTCMonth()+1,o=i.getUTCDate(),s===(a=i.getUTCMonth()+1)?`${String(r).padStart(2,"0")} - ${String(o).padStart(2,"0")}\n            ${y[s]}`:`${String(r).padStart(2,"0")} ${y[s]} -\n          ${String(o).padStart(2,"0")} ${y[a]}`;var r,s,o,a})(this.#t),r=(e=>{let t=0;for(let n=0;n<e.length;n++)if(t+=e[n].base_price,e[n].offers&&e[n].offers.length)for(let i=0;i<e[n].offers.length;i++)t+=T(e[n].offers[i]).price;return t})(this.#t);this.#w=new Y(n,i,r),e(this.#w,t,"afterbegin")}}let ee="";const te=document.querySelector(".trip-controls__filters"),ne=document.querySelector(".trip-events"),ie=new class{routeContainer=null;#p=new $;#t=new M;#$=null;#S=new Map;constructor({routeContainer:e}){this.routeContainer=e}#E=e=>{"INPUT"===e.target.tagName&&e.target.dataset.sortType!==ee&&(this.#t.sort(B[e.target.dataset.sortType]),this.#A(),ee=e.target.dataset.sortType)};#x=()=>this.#S.forEach((e=>e.resetComponent()));#T=e=>{"Escape"===e.key&&this.#x()};#k=()=>{new W(this.#t,this.routeContainer).init(),this.#t=this.#t.sort(F),document.querySelector(".trip-events__trip-sort").addEventListener("click",this.#E)};#L=e=>{const t=this.#t.find((t=>t.id===e.id));t.is_favorite=!t.is_favorite};#A(){!function(e){if(null!==e){if(!(e instanceof g))throw new Error("Can remove only components");e.element.remove(),e.removeElement()}}(this.#p),this.#p=new $,e(this.#p,this.routeContainer),this.#t.forEach((e=>this.#M(e))),document.addEventListener("keydown",this.#T)}#M(e){const t=new K(this.#p,e,this.#L,this.#x);t.init(e),this.#S.set(e.id,t)}#H(){new Q(this.#t).init()}#P(){this.#$=new H,e(this.#$,this.routeContainer)}init(){e(this.#p,this.routeContainer),this.#t=[...this.#t.route],this.#t.length?(this.#k(),ee=j,this.#A(),this.#H()):this.#P()}}({routeContainer:ne});e(new class extends g{get template(){return`\n    <form class="trip-filters" action="#" method="get">\n      ${Array.from(C,(e=>{return`\n      <div class="trip-filters__filter">\n        <input id="filter-${(t=e).toLowerCase()}" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="${t.toLowerCase()}">\n        <label class="trip-filters__filter-label" for="filter-${t.toLowerCase()}">${t}</label>\n      </div>\n  `;var t})).join("")}\n      <button class="visually-hidden" type="submit">Accept filter</button>\n    </form>\n  `}},te),ie.init()})()})();
//# sourceMappingURL=bundle.a491e61657a40f6df75f.js.map